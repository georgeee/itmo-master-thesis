\section {Дополнительные улучшения}

В данном разделе мы рассмотрим ряд улучшений, не рассмотренных в предыдущем разделе, но ощутимо улучшивших характеристики графа связей.

### Используемые отсечения ###

Первоначально разработанную метрику предполагась рассмтривать, как непосредственный способ оценки близости синсета из PWN и YARN. Предполагалось, что значение, близкое к единице будет указывать на близость синсетов, значения ниже $T = 0.3$ --- отсутствие значительной связи между синсетами. И как следствие, планировалось получить множество кандидатов удалением всех ребер, меньших $T$.

Однако, впоследствии было замечено, что для некоторых синсетов вес наиближайшего по метрике кандидата не привышает $0.35$, причем среди кандидатов есть релевантные. Причем, что также хорошо наблюдалось, между собой кандидаты на связывание достаточно хорошо отличались по весам, что позволяло выбрать из них первые 10-15, будучи уверенными, что кандидаты с меньшим весом наверняка не представляют для нас интереса.
Кроме того, поскольку мы строили граф связей как ориентированный граф, имело смысл рассматривать не только средний (неориентированный) вес, но и веса обоих полурёбер.

Именно поэтому было принято отсекать лишние связи по комбинированному критерию: выбирать первые $N_{max} = 15$ кандидатов, вес полуребер которых больше $T' = 0.2$, средний вес --- больше $T = 0.2$.

### Использование словарей ###
\label{ch04-dicts}

Когда работа над процедурой связывания только началась, мы использовали только один (оффлайновый) словарь --- Lingvo Universal (версия ок. 2003 года), доступный в формате Stardict [@stardict-dicts]. Одним из первых наблюдений для нас был явный недостаток покрытия словаря: некоторые слова, не столь редкие в употреблении либо в нем, либо в статьях перевода отстутствовали, тем самым затрудняя нахождение всех релевантных кандидатов.

Следующим шагом мы попробовали использовать онлайн сервис, Яндекс.Словари. В этом сервисе также используются словари Lingvo (только уже последней версии). Данный сервис обладал ощутимо большим покрытием, однако имел два существенных недостатка: время, требуемое на исполнение HTTP запроса и суточное ограничение на число запросов.

Процедура выравнивания устроена таким образом, что для того, чтобы установить связь между двумя синсетами $a \in A$ и $b \in B$, нам нужно сперва перевести все слова $a$ в язык тезауруса $B$, а затем для всех найденных синсетов из $B$ произвести обратный перевод в язык $A$. Допустим, $a$ состоит из трех слов и для $a$ нашлись переводы в 5 синсетов $B$, а каждый из этих пяти также состоит из трёх слов. Итого получаем $3+5 \cdot 3=18$ запросов к онлайн-сервису. На практике из-за многозначности многих слов, количество запросов для одного синсета может достигать и значительно больших значений (более ста - не редкость), вследствие чего лимит сервиса ($10 000$ запросов) исчерпывается за первые 100-200 синсетов PWN.

Именно поэтому было решено использовать:

* кэширование запросов к онлайн-сервису
* обращаться к онлайн сервису только в случае, если перевод не найден при помощи оффлайнового словаря

Далее нами было опробовано использование результатов парсинга ресурса Wiktionary [@wiktionary-parsing] в качестве дополнительного словаря. Ресурс оказался чрезвычайно ценным, обладающим значительной полнотой покрытия, точностью, и кроме того для большого числа синсетов в Wiktionary обнаружились описания на языке исxодного синсета, использование которых помогло нам значительно улучшить меру (см. раздел \ref{ch04-wikt-glosses}).

Чтобы максимально полно и эффективно использовать данные всех этих словарей, для каждого направления перевода (англо-русский и русско-английский) они были объединены в две конфигурации: полную и ступенчатую.

Полная конфигурация объединяет выдачи от всех словарей, ступенчатая же состоит из нескольких ступеней, словари следующей используются только если слово не было найдено в выдачах словарей предыдущей ступени.

Разделение на две конфигурации было в введено со следующей целью: во время тестирования мы столкнулись с проблемой _синсетов-сирот_, т.е. синсетов, для которых не было найдено ни одного кандидата из YARN. Причем таких синсетов обнаруживалось достаточно много, в то время как для многих переводы в словарях находились. В процессе разбирательства мы обнаружили, что для многих из этих синсетов по переводу находились синсеты из YARN, но не все, и именно те, которые могли образовать связи по обратным переводам, не находились. Причем, что мы также заметили, нередко использование полной конфигурации решало проблему (однако как было отмечено, излишне загружать онлайн-сервис запросами нам бы тоже не хотелось).

Решение было найдено следующее: поиск кандидатов проводился в три этапа, с каждым ослаблялись критерии отсечения, на втором и третьем этапах использовалась полная конфигурация.
Применение такого улучшения позволило найти кандидатов (притом как правило релевантные синсеты) для дополнительных 8% тестовой выборки.

