\section{Доступ к динамическим переменным окружения}

В некоторых случаях, в частности, при построении большинства алгоритмов консенсуса, для построения обработчика приходящих транзакций и блоков может потребоваться доступ к некоторым изменяющимся параметрам окружения.
В качестве такого параметра может выступить любой параметр, о котором можно выдвинуть предположение о синхронизированности между множеством узлов сети. Единственным используемым на практике параметром, однако, является локальное время. Синхронизация локального времени между множеством узлов сети возможна в случае, когда на всех машинах включен сервис NTP или аналогичные ему.

Для предоставления доступа к динамическим параметрам окружения в предлагаемой модели блокчейн-системы предлагается воспользоваться моделью состояния: специальный компонент в модели состояния будет содержать отображение из имени параметра в его последнее значение. Таким образом, любое вычисление в модели состояния будет иметь доступ к любому из изменяющихся параметров.

Однако для завершения построения требуется рассмотреть функционал, который будет обновлять значения в состоянии.
В рассмотренных ранее частях модели блокейн-системы изменение состояния производилось только функционалом обработки цепи блоков (раздел \ref{ch02-block-handling}), теперь же помимо этого функционала должен существовать некий гипервизор (от англ. _hypervisor_ -- надсмотрщик), следящий за изменением параметров окружения и обновляющий состояние соответствующим образом.

Кроме того, следует заметить, что корректность многих операций при вычислениях в модели состояния напрямую зависит от отсутствия возможности записи в вычислении модели состояния и, вообще говоря, от неизменности состояния во время проведения операции (применения блоков, в частности). Вследствие этого гипервизор должен быть реализован в связке с функционалом обработки блоков, чтобы упорядочить события обработки блоков и изменения параметров окружения.

